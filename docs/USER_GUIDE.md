# NovelAI Auto Generator ユーザーガイド

## 📋 目次

1. [はじめに](#はじめに)
2. [インストール](#インストール)
3. [基本機能](#基本機能)
4. [プロンプト合成機能](#プロンプト合成機能)
5. [新フォーマット対応](#新フォーマット対応)
6. [自動画像生成](#自動画像生成)
7. [設定とカスタマイズ](#設定とカスタマイズ)
8. [トラブルシューティング](#トラブルシューティング)
9. [FAQ](#faq)

## はじめに

NovelAI Auto Generatorは、NovelAIのWeb UIを自動化し、効率的に画像生成を行うためのChrome拡張機能です。

### 主な特徴

- **プロンプト合成**: 共通プロンプトとプリセットを組み合わせて効率的にプロンプトを作成
- **新フォーマット対応**: v1.0フォーマットとレガシーフォーマットの両方をサポート
- **自動画像生成**: 複数画像の一括生成と自動ダウンロード
- **メタデータ管理**: プロンプトセットの詳細情報を管理

## インストール

### 前提条件

- Google Chrome バージョン 88 以上
- NovelAIアカウント（有料プラン推奨）

### インストール手順

1. **リポジトリのダウンロード**

   ```bash
   git clone https://github.com/small-java-world/novel-ai-auto.git
   ```

2. **Chrome拡張機能の読み込み**
   - Chromeで `chrome://extensions/` を開く
   - 「デベロッパーモード」を有効化
   - 「パッケージ化されていない拡張機能を読み込む」をクリック
   - ダウンロードしたフォルダを選択

3. **権限の確認**
   - NovelAI.netへのアクセス権限
   - ダウンロード機能
   - ストレージアクセス

## 基本機能

### 拡張機能の起動

1. Chromeのツールバーで拡張機能アイコンをクリック
2. ポップアップウィンドウが開きます

### メイン画面の構成

```
┌─────────────────────────────────┐
│  NovelAI Auto Generator         │
├─────────────────────────────────┤
│  🎨 プロンプト合成機能          │
│  ├─ 共通プロンプト入力          │
│  ├─ 合成ルール選択              │
│  ├─ プレビュー表示              │
│  └─ NovelAIに適用ボタン         │
├─────────────────────────────────┤
│  📁 新フォーマット対応          │
│  ├─ フォーマット選択            │
│  ├─ ファイルアップロード        │
│  ├─ メタデータ表示              │
│  └─ 変換・エクスポート          │
└─────────────────────────────────┘
```

## プロンプト合成機能

### 概要

共通プロンプトとプリセットを組み合わせて、効率的にプロンプトを作成する機能です。

### 使用方法

#### 1. 共通プロンプトの設定

**ポジティブプロンプト**

```
masterpiece, best quality, highres, 1girl, solo
```

**ネガティブプロンプト**

```
lowres, bad anatomy, bad hands, text, error, missing fingers
```

#### 2. 合成ルールの選択

**デフォルトルール**

```
{commonPositive} {presetPositive}
```

**カスタムルールの例**

```
{commonPositive}, {presetPositive}, masterpiece, best quality
```

#### 3. プレビューと適用

1. **「プレビュー更新」**ボタンをクリック
2. 合成結果を確認
3. **「NovelAIに適用」**ボタンで自動適用

### 合成ルールの詳細

#### 利用可能な変数

- `{commonPositive}`: 共通ポジティブプロンプト
- `{commonNegative}`: 共通ネガティブプロンプト
- `{presetPositive}`: プリセットポジティブプロンプト
- `{presetNegative}`: プリセットネガティブプロンプト

#### カスタムテンプレートの例

```javascript
// 品質重視
'{commonPositive}, {presetPositive}, masterpiece, best quality, ultra detailed';

// スタイル重視
'{presetPositive}, {commonPositive}, anime style, detailed';

// ネガティブプロンプトも含める
'{commonPositive}, {presetPositive} | {commonNegative}, {presetNegative}';
```

## 新フォーマット対応

### 概要

v1.0フォーマットとレガシーフォーマットの両方をサポートし、相互変換が可能です。

### サポートフォーマット

#### レガシーフォーマット

```json
{
  "presets": [
    {
      "id": "preset1",
      "name": "プリセット1",
      "positive": "1girl, solo, beautiful",
      "negative": "lowres, bad anatomy"
    }
  ]
}
```

#### v1.0フォーマット

```json
{
  "version": "1.0",
  "metadata": {
    "name": "アニメキャラクターセット",
    "description": "アニメ風キャラクター生成用のプロンプトセット",
    "author": "ユーザー名",
    "tags": ["anime", "character", "girl"],
    "created": "2025-01-01T00:00:00Z",
    "modified": "2025-01-01T00:00:00Z"
  },
  "presets": [
    {
      "id": "anime_girl_1",
      "name": "アニメ少女1",
      "positive": "1girl, solo, beautiful, anime style",
      "negative": "lowres, bad anatomy, bad hands",
      "settings": {
        "steps": 28,
        "scale": 5,
        "sampler": "k_euler"
      }
    }
  ]
}
```

### 使用方法

#### 1. ファイルの読み込み

1. **フォーマット選択**で「既存形式」「新形式」「自動検出」を選択
2. **ファイルアップロード**でJSONファイルを選択
3. **「ファイル読み込み」**ボタンをクリック

#### 2. メタデータの確認

読み込み後、以下の情報が表示されます：

- **名前**: プロンプトセット名
- **説明**: 詳細説明
- **作者**: 作成者名
- **タグ**: 関連タグ
- **作成日**: 作成日時
- **更新日**: 最終更新日時

#### 3. 形式変換

1. **「形式変換」**ボタンをクリック
2. レガシー ↔ v1.0 の相互変換が実行
3. 変換結果がメタデータ表示エリアに反映

#### 4. ファイルのエクスポート

1. **「ファイルエクスポート」**ボタンをクリック
2. 変換済みのJSONファイルがダウンロード

### メタデータの詳細

#### 必須フィールド

- `name`: プロンプトセット名（最大100文字）
- `version`: フォーマットバージョン（"1.0"）

#### オプションフィールド

- `description`: 説明（最大500文字）
- `author`: 作者名（最大50文字）
- `tags`: タグ配列（最大20個）
- `created`: 作成日時（ISO 8601形式）
- `modified`: 更新日時（ISO 8601形式）

#### プリセット設定

```json
{
  "settings": {
    "steps": 28, // 生成ステップ数
    "scale": 5, // CFGスケール
    "sampler": "k_euler", // サンプラー
    "resolution": "512x768" // 解像度
  }
}
```

## 自動画像生成

### 概要

設定したプロンプトで複数の画像を自動生成し、ダウンロードする機能です。

### 使用方法

#### 1. 事前準備

1. NovelAIのWebページでログイン
2. 拡張機能でプロンプトを設定・適用
3. 生成枚数を設定（1-100枚）

#### 2. 生成開始

1. **「生成開始」**ボタンをクリック
2. 進捗バーで生成状況を確認
3. 完了後、自動的にダウンロード

#### 3. ファイル管理

- **保存先**: `Downloads/NovelAI/` フォルダ
- **ファイル名**: `image_YYYYMMDD_HHMMSS_001.png`
- **フォーマット**: PNG形式

### 進捗監視

```
生成進捗: [████████████████████████████████] 100%
現在: 10/10 枚完了
残り時間: 約 0 分
```

### エラーハンドリング

- **ネットワークエラー**: 自動リトライ（最大3回）
- **生成失敗**: スキップして次の画像へ
- **権限エラー**: ダウンロードフォルダの確認

## 設定とカスタマイズ

### 基本設定

#### 生成設定

- **生成枚数**: 1-100枚
- **タイムアウト**: 30-300秒
- **リトライ回数**: 1-5回

#### ファイル設定

- **ダウンロード先**: カスタムフォルダ選択可能
- **ファイル名テンプレート**: カスタマイズ可能
- **画像フォーマット**: PNG/JPEG選択

### 高度な設定

#### パフォーマンス設定

- **並列処理**: 同時生成数（1-3）
- **メモリ使用量**: 制限設定
- **ログレベル**: DEBUG/INFO/WARN/ERROR

#### セキュリティ設定

- **権限管理**: 最小権限の原則
- **データ暗号化**: ローカルストレージ
- **プライバシー**: データ送信なし

## トラブルシューティング

### よくある問題

#### 1. 拡張機能が表示されない

**症状**: Chromeのツールバーにアイコンが表示されない

**解決策**:

1. `chrome://extensions/` で拡張機能が有効か確認
2. ページをリロード
3. Chromeを再起動

#### 2. NovelAIに適用されない

**症状**: 「NovelAIに適用」ボタンを押しても反映されない

**解決策**:

1. NovelAIページでログインしているか確認
2. ページをリロードしてから再試行
3. ブラウザの権限設定を確認

#### 3. ファイルが読み込めない

**症状**: JSONファイルの読み込みでエラーが発生

**解決策**:

1. ファイル形式が正しいか確認
2. ファイルサイズが10MB以下か確認
3. JSONの構文エラーがないか確認

#### 4. 生成が開始されない

**症状**: 「生成開始」ボタンを押しても反応しない

**解決策**:

1. NovelAIの生成ボタンが利用可能か確認
2. プロンプトが正しく設定されているか確認
3. ブラウザの権限設定を確認

#### 5. ダウンロードが失敗する

**症状**: 画像のダウンロードが完了しない

**解決策**:

1. ダウンロードフォルダの権限を確認
2. ディスク容量が十分か確認
3. ウイルス対策ソフトの設定を確認

### ログの確認方法

#### 1. Chrome開発者ツール

1. F12キーで開発者ツールを開く
2. **Console**タブでエラーメッセージを確認
3. **Network**タブで通信状況を確認

#### 2. 拡張機能のログ

1. `chrome://extensions/` を開く
2. 拡張機能の「詳細」をクリック
3. 「バックグラウンドページを検査」をクリック

### パフォーマンスの最適化

#### 1. メモリ使用量の削減

- 不要なタブを閉じる
- 他の拡張機能を無効化
- ブラウザを再起動

#### 2. 生成速度の向上

- 生成枚数を調整
- 並列処理数を最適化
- ネットワーク環境を改善

## FAQ

### Q: 無料プランでも使用できますか？

A: はい、無料プランでも基本的な機能は使用できます。ただし、生成速度や制限があるため、有料プランの使用を推奨します。

### Q: 他のAI画像生成サービスでも使用できますか？

A: 現在はNovelAI専用です。他のサービスへの対応は今後のアップデートで検討予定です。

### Q: プロンプトセットを共有できますか？

A: はい、v1.0フォーマットのJSONファイルをエクスポートして共有できます。

### Q: データは外部に送信されますか？

A: いいえ、すべてのデータはローカルで処理され、外部に送信されることはありません。

### Q: バックアップは必要ですか？

A: プロンプトセットや設定はローカルストレージに保存されるため、定期的なバックアップを推奨します。

### Q: アップデートは自動ですか？

A: Chrome拡張機能のアップデートは自動で行われます。手動でアップデートしたい場合は、リポジトリから最新版をダウンロードしてください。

### Q: サポートはありますか？

A: 問題や質問がある場合は、GitHubのIssuesで報告してください。可能な限り対応いたします。

---

## 📞 サポート

- **GitHub Issues**: [https://github.com/small-java-world/novel-ai-auto/issues](https://github.com/small-java-world/novel-ai-auto/issues)
- **ドキュメント**: [README.md](../README.md)
- **ライセンス**: [MIT License](../LICENSE)

---

_このガイドは随時更新されます。最新の情報はGitHubリポジトリをご確認ください。_
