# NovelAI Auto Generator ユーザーガイド

## 📋 目次

1. [はじめに](#はじめに)
2. [インストール](#インストール)
3. [基本機能](#基本機能)
4. [プロンプト合成機能](#プロンプト合成機能)
5. [新フォーマット対応](#新フォーマット対応)
6. [自動画像生成](#自動画像生成)
7. [設定とカスタマイズ](#設定とカスタマイズ)
8. [トラブルシューティング](#トラブルシューティング)
9. [FAQ](#faq)
10. [セレクタープロファイル](#セレクタープロファイル)

## はじめに

NovelAI Auto Generatorは、NovelAIのWeb UIを自動化し、効率的に画像生成を行うためのChrome拡張機能です。

### 主な特徴

- **プロンプト合成**: 共通プロンプトとプリセットを組み合わせて効率的にプロンプトを作成
- **新フォーマット対応**: v1.0フォーマットとレガシーフォーマットの両方をサポート
- **自動画像生成**: 複数画像の一括生成と自動ダウンロード
- **メタデータ管理**: プロンプトセットの詳細情報を管理
- **キャラクター別管理**: アニメ、リアル、ファンタジー等のカテゴリ別プロンプト管理

## インストール

### 前提条件

- **Google Chrome** バージョン 96 以上
- **NovelAIアカウント**（有料プラン推奨）
- **インターネット接続**

### インストール手順

#### 1. リポジトリのダウンロード

```bash
git clone https://github.com/small-java-world/novel-ai-auto.git
cd novel-ai-auto
```

#### 2. Chrome拡張機能の読み込み

1. Chromeで `chrome://extensions/` を開く
2. **「デベロッパーモード」**を有効化（右上のトグルスイッチ）
3. **「パッケージ化されていない拡張機能を読み込む」**をクリック
4. ダウンロードしたプロジェクトフォルダを選択
5. 拡張機能が読み込まれることを確認

#### 3. 権限の確認

インストール時に以下の権限が要求されます：

- **NovelAI.net**へのアクセス権限
  - NovelAIのWebページでの自動化に必要
- **ダウンロード**機能
  - 生成された画像の自動保存に必要
- **ストレージ**アクセス
  - 設定とプリセットの保存に必要
- **タブ**アクセス
  - NovelAIページの検出と制御に必要

### 権限の詳細説明

#### NovelAI.net へのアクセス権限

- **目的**: NovelAIのWebページでDOM操作を実行
- **使用場面**: プロンプト入力、生成ボタンクリック、進捗監視
- **セキュリティ**: NovelAIの公式ドメインのみに制限

#### ダウンロード機能

- **目的**: 生成された画像を自動的にダウンロード
- **使用場面**: 画像生成完了後の自動保存
- **制限**: ユーザーのダウンロードフォルダにのみ保存

#### ストレージアクセス

- **目的**: 設定、プリセット、ログの保存
- **使用場面**: ユーザー設定の永続化、プリセット管理
- **制限**: ChromeのストレージAPI内でのみ動作

#### タブアクセス

- **目的**: NovelAIページの検出と制御
- **使用場面**: ページ状態の確認、タブの切り替え
- **制限**: NovelAIドメインのタブのみに制限

## 基本機能

### 拡張機能の起動

1. **NovelAIにログイン**
   - [NovelAI](https://novelai.net/) にアクセスしてログイン
   - 画像生成ページに移動

2. **拡張機能を起動**
   - Chromeの拡張機能アイコンをクリック
   - NovelAI Auto Generatorのポップアップが開く

3. **基本操作**
   - プリセット選択
   - 生成枚数設定
   - 生成開始

### プリセット管理

#### プリセットの種類

**アニメキャラクター**

- アニメ風のキャラクター生成
- 詳細な顔の描写
- カラフルな目

**リアル系キャラクター**

- リアルなポートレート
- プロフェッショナルな写真風
- 高品質な描写

**ファンタジーキャラクター**

- ファンタジー世界のキャラクター
- 中世風の装備
- エピックなポーズ

#### プリセットの選択

1. **ドロップダウンから選択**
   - 利用可能なプリセット一覧から選択
   - カテゴリ別に整理

2. **プレビュー表示**
   - 選択したプリセットの詳細を表示
   - プロンプト内容の確認

3. **カスタマイズ**
   - 必要に応じてプロンプトを編集
   - パラメータの調整

## プロンプト合成機能

### 合成の基本概念

プロンプト合成機能では、以下の要素を組み合わせて効率的にプロンプトを作成します：

- **共通プロンプト**: 全体的な品質やスタイルを指定
- **プリセットプロンプト**: キャラクター固有の特徴を指定
- **合成ルール**: これらを組み合わせる方法を指定

### 合成ルールの種類

#### 1. デフォルトルール（共通優先）

```
{commonPositive} {presetPositive}
```

**例**:

- 共通: `masterpiece, best quality, highres`
- プリセット: `1girl, solo, beautiful`
- 結果: `masterpiece, best quality, highres 1girl, solo, beautiful`

#### 2. プリセット優先ルール

```
{presetPositive}, {commonPositive}
```

**例**:

- プリセット: `1girl, solo, beautiful`
- 共通: `masterpiece, best quality, highres`
- 結果: `1girl, solo, beautiful, masterpiece, best quality, highres`

#### 3. カスタムテンプレートルール

```
{commonPositive}, {presetPositive}, masterpiece, best quality
```

**例**:

- 共通: `highres, detailed`
- プリセット: `1girl, solo`
- 結果: `highres, detailed, 1girl, solo, masterpiece, best quality`

### 合成の使用方法

#### 1. 基本合成

1. **共通プロンプトを設定**
   - ポジティブプロンプト: 品質指定（例: `masterpiece, best quality`）
   - ネガティブプロンプト: 除外指定（例: `lowres, bad anatomy`）

2. **プリセットを選択**
   - ドロップダウンからキャラクターを選択
   - プレビューで内容を確認

3. **合成ルールを選択**
   - デフォルト、プリセット優先、カスタムから選択
   - カスタムの場合はテンプレートを入力

4. **プレビュー更新**
   - 「プレビュー更新」ボタンをクリック
   - 合成結果を確認

5. **NovelAIに適用**
   - 「NovelAIに適用」ボタンをクリック
   - 自動的にNovelAIの入力欄に反映

#### 2. 高度な合成

**カスタムテンプレートの作成**

```javascript
// 基本的なテンプレート
'{commonPositive}, {presetPositive}';

// 品質強化テンプレート
'{commonPositive}, {presetPositive}, masterpiece, best quality, highres';

// スタイル指定テンプレート
'{commonPositive}, {presetPositive}, anime style, detailed face';

// 条件分岐テンプレート（将来実装予定）
'{commonPositive}, {presetPositive}, {#if category="anime"}anime style{/if}';
```

**変数の利用**

- `{commonPositive}`: 共通ポジティブプロンプト
- `{commonNegative}`: 共通ネガティブプロンプト
- `{presetPositive}`: プリセットポジティブプロンプト
- `{presetNegative}`: プリセットネガティブプロンプト

### 文字数制限と警告

#### 制限値

- **最大文字数**: 2000文字
- **警告閾値**: 1800文字
- **エラー閾値**: 2000文字

#### 警告表示

- **1800文字超過**: 黄色の警告表示
- **2000文字超過**: 赤色のエラー表示
- **自動切り詰め**: 2000文字で自動的に切り詰め

## 新フォーマット対応

### フォーマットの種類

#### 1. 既存形式 (Legacy)

```json
{
  "presets": [
    {
      "id": "preset1",
      "name": "プリセット1",
      "positive": "1girl, solo",
      "negative": "lowres, bad anatomy"
    }
  ]
}
```

**特徴**:

- シンプルな構造
- 基本的なプロンプト情報のみ
- 後方互換性

#### 2. 新形式 (v1.0)

```json
{
  "version": "1.0",
  "metadata": {
    "name": "プロンプトセット名",
    "description": "説明",
    "author": "作者名",
    "tags": ["anime", "girl"],
    "created": "2025-01-01T00:00:00Z",
    "modified": "2025-01-01T00:00:00Z"
  },
  "presets": [
    {
      "id": "preset1",
      "name": "プリセット1",
      "positive": "1girl, solo",
      "negative": "lowres, bad anatomy",
      "settings": {
        "steps": 28,
        "scale": 5,
        "sampler": "k_euler"
      }
    }
  ]
}
```

**特徴**:

- メタデータの充実
- バージョン管理
- 詳細な設定情報

#### 3. キャラクター形式 (Characters)

```json
{
  "characters": {
    "anime_girl_1": {
      "name": "アニメ少女1",
      "selectorProfile": "character-anime",
      "prompts": {
        "positive": "1girl, solo, beautiful, anime style",
        "negative": "lowres, bad anatomy, bad hands"
      },
      "settings": {
        "steps": 28,
        "scale": 5,
        "sampler": "k_euler"
      }
    }
  }
}
```

**特徴**:

- キャラクター中心の構造
- セレクタープロファイル対応
- 柔軟な設定

### フォーマット変換

#### 1. 自動検出

- ファイル形式を自動的に判定
- 適切な処理方法を選択
- エラー時のフォールバック

#### 2. 手動指定

- ユーザーが明示的に形式を指定
- 強制変換の実行
- 詳細なログ出力

#### 3. 変換処理

**既存形式 → 新形式**

```json
// 変換前
{
  "presets": [
    {
      "id": "preset1",
      "name": "プリセット1",
      "positive": "1girl, solo"
    }
  ]
}

// 変換後
{
  "version": "1.0",
  "metadata": {
    "name": "変換されたプロンプトセット",
    "description": "既存形式から変換",
    "author": "システム",
    "tags": [],
    "created": "2025-01-20T00:00:00Z",
    "modified": "2025-01-20T00:00:00Z"
  },
  "presets": [
    {
      "id": "preset1",
      "name": "プリセット1",
      "positive": "1girl, solo",
      "negative": "",
      "settings": {}
    }
  ]
}
```

### メタデータ管理

#### メタデータの項目

- **name**: プロンプトセット名
- **description**: 詳細な説明
- **author**: 作成者名
- **tags**: タグ配列
- **created**: 作成日時
- **modified**: 更新日時

#### タグベースフィルタリング

**タグの種類**:

- `anime`: アニメ系
- `realistic`: リアル系
- `fantasy`: ファンタジー系
- `portrait`: ポートレート
- `landscape`: 風景
- `character`: キャラクター

**フィルタリング機能**:

- タグによる絞り込み
- 複数タグの組み合わせ
- 検索機能

## 自動画像生成

### 生成フロー

#### 1. 事前準備

1. **NovelAIにログイン**
   - 有効なアカウントでログイン
   - 十分なクレジットを確認

2. **ページの準備**
   - 画像生成ページに移動
   - ページの読み込み完了を確認

3. **拡張機能の起動**
   - ポップアップを開く
   - 設定を確認

#### 2. 生成設定

1. **プロンプト設定**
   - プリセット選択またはカスタム入力
   - 合成ルールの選択
   - プレビュー確認

2. **パラメータ設定**
   - 生成枚数: 1-100枚
   - ステップ数: デフォルト28
   - CFGスケール: デフォルト5
   - サンプラー: デフォルトk_euler

3. **ファイル設定**
   - ファイル名テンプレート
   - ダウンロード先フォルダ

#### 3. 生成実行

1. **生成開始**
   - 「生成開始」ボタンをクリック
   - 自動的にNovelAIに適用

2. **進捗監視**
   - リアルタイム進捗表示
   - ETA（残り時間）表示
   - ログメッセージ

3. **完了処理**
   - 自動ダウンロード
   - ファイル名の生成
   - 完了通知

### 進捗監視

#### 進捗表示の要素

- **現在の枚数**: 生成済み枚数
- **全体の枚数**: 予定枚数
- **進捗バー**: 視覚的な進捗
- **ETA**: 残り時間の推定
- **ステータス**: 現在の状態

#### ステータスの種類

- **待機中**: 生成開始前
- **生成中**: 画像生成中
- **ダウンロード中**: ファイル保存中
- **完了**: 正常完了
- **エラー**: エラー発生
- **キャンセル**: ユーザーによる停止

#### ログメッセージ

**情報レベル**:

- 生成開始
- 進捗更新
- 完了通知

**警告レベル**:

- リトライ実行
- タイムアウト
- 部分的な失敗

**エラーレベル**:

- 生成失敗
- ダウンロード失敗
- 致命的なエラー

### エラーハンドリング

#### エラーの種類

**ネットワークエラー**:

- 接続タイムアウト
- サーバーエラー
- 認証エラー

**NovelAIエラー**:

- クレジット不足
- レート制限
- サーバー負荷

**システムエラー**:

- メモリ不足
- ディスク容量不足
- 権限エラー

#### リトライ機能

**自動リトライ**:

- 最大3回まで再試行
- 指数バックオフによる間隔調整
- エラー種別による制御

**手動リトライ**:

- ユーザーによる再実行
- 設定の調整
- 問題の解決

### キャンセル機能

#### キャンセルの方法

1. **UIからのキャンセル**
   - 「キャンセル」ボタンをクリック
   - 確認ダイアログで確定

2. **キーボードショートカット**
   - Escapeキーでキャンセル
   - 即座に停止

#### キャンセル後の状態

- **生成の停止**: 新しい生成を開始しない
- **進行中の完了**: 現在の生成は完了まで待機
- **クリーンアップ**: 一時ファイルの削除
- **状態リセット**: 待機状態に戻る

## 設定とカスタマイズ

### 基本設定

#### 生成設定

**生成枚数**:

- 範囲: 1-100枚
- デフォルト: 1枚
- 推奨: 10枚以下（安定性のため）

**ファイル名テンプレート**:

- デフォルト: `{date}_{prompt}_{seed}_{idx}`
- 利用可能変数:
  - `{date}`: 日付（YYYYMMDD形式）
  - `{prompt}`: プロンプトの最初の部分
  - `{seed}`: シード値
  - `{idx}`: 連番（1から開始）

**ダウンロード先**:

- デフォルト: 「NovelAI」フォルダ
- カスタム: ユーザー指定フォルダ

#### 品質設定

**ステップ数**:

- 範囲: 1-50
- デフォルト: 28
- 推奨: 20-30（品質と速度のバランス）

**CFGスケール**:

- 範囲: 1-20
- デフォルト: 5
- 推奨: 4-7（自然な生成のため）

**サンプラー**:

- デフォルト: k_euler
- 選択肢: k_euler, k_euler_ancestral, k_dpm_2, k_dpm_2_ancestral

### 高度な設定

#### パフォーマンス設定

**リトライ回数**:

- 範囲: 1-10回
- デフォルト: 3回
- 推奨: 3-5回

**タイムアウト**:

- 範囲: 10-300秒
- デフォルト: 30秒
- 推奨: 30-60秒

**並列処理**:

- 現在: 1枚ずつ順次処理
- 将来: 並列処理の実装予定

#### セキュリティ設定

**ログレベル**:

- エラーのみ: 最小限のログ
- 警告以上: エラーと警告
- 情報以上: 詳細なログ
- デバッグ: 全てのログ

**データ保存**:

- ローカルのみ: 外部送信なし
- 暗号化: 機密データの保護
- 自動削除: 古いログの削除

#### アクセシビリティ設定

**UI表示**:

- 高コントラスト: 視認性の向上
- 大きなフォント: 読みやすさの向上
- キーボードナビゲーション: マウス不要の操作

**音声フィードバック**:

- 完了音: 生成完了時の通知
- エラー音: エラー発生時の通知
- 無音: 音声通知なし

### カスタマイズ

#### プリセットの追加

**手動追加**:

1. 設定ファイルを編集
2. 新しいプリセットを定義
3. 拡張機能を再読み込み

**ファイルインポート**:

1. JSONファイルを準備
2. インポート機能を使用
3. 自動検証と追加

#### テーマの変更

**カラーテーマ**:

- ライトテーマ: 明るい背景
- ダークテーマ: 暗い背景
- 自動: システム設定に従う

**レイアウト**:

- コンパクト: 小さな表示
- 標準: 通常の表示
- 拡大: 大きな表示

#### ショートカットキー

**基本操作**:

- Ctrl+Shift+N: 拡張機能を開く
- Ctrl+Shift+G: 生成開始
- Ctrl+Shift+C: キャンセル
- Escape: キャンセル

**カスタムショートカット**:

- ユーザー定義のキー組み合わせ
- 機能の割り当て
- 競合の検出

## トラブルシューティング

### よくある問題

#### 1. NovelAIに適用されない

**症状**: プロンプトがNovelAIの入力欄に反映されない

**原因**:

- NovelAIページでログインしていない
- ページの読み込みが完了していない
- 拡張機能の権限が不足
- DOMセレクターの不一致

**解決策**:

1. NovelAIページでログインしているか確認
2. ページをリロードしてから再試行
3. 拡張機能の権限設定を確認
4. セレクタープロファイルを手動で変更
5. 開発者ツールでエラーメッセージを確認

**詳細な診断**:

```javascript
// 開発者ツールのコンソールで実行
console.log('NovelAI要素の検出状況:');
console.log('プロンプト入力欄:', document.querySelector('textarea'));
console.log('生成ボタン:', document.querySelector('button[type="submit"]'));
```

#### 2. ファイルが読み込めない

**症状**: JSONファイルの読み込みに失敗する

**原因**:

- JSONファイルの形式が正しくない
- ファイルサイズが制限を超えている
- 文字エンコーディングの問題
- ファイルの拡張子が間違っている

**解決策**:

1. JSONファイルの形式が正しいか確認
   ```json
   {
     "presets": [
       {
         "id": "test",
         "name": "テスト",
         "positive": "test prompt"
       }
     ]
   }
   ```
2. ファイルサイズが制限内か確認（10MB以下）
3. 文字エンコーディングがUTF-8か確認
4. ファイルの拡張子が `.json` か確認
5. JSONバリデーターで構文チェック

#### 3. 生成が開始されない

**症状**: 「生成開始」ボタンを押しても反応しない

**原因**:

- NovelAIの生成ボタンが利用できない
- ブラウザの権限設定の問題
- 拡張機能が無効になっている
- JavaScriptエラーの発生

**解決策**:

1. NovelAIの生成ボタンが利用可能か確認
2. ブラウザの権限設定を確認
3. 拡張機能が有効になっているか確認
4. コンソールでエラーメッセージを確認
5. ページをリロードしてから再試行

**権限の確認方法**:

1. `chrome://extensions/` を開く
2. NovelAI Auto Generatorの「詳細」をクリック
3. 権限一覧を確認
4. 必要に応じて権限を再付与

#### 4. ダウンロードが失敗する

**症状**: 画像がダウンロードされない

**原因**:

- ダウンロードフォルダの権限不足
- ディスク容量の不足
- Chromeのダウンロード設定の問題
- ウイルス対策ソフトの干渉

**解決策**:

1. ダウンロードフォルダの権限を確認
2. ディスク容量が十分か確認
3. Chromeのダウンロード設定を確認
4. ウイルス対策ソフトの干渉を確認
5. 別のフォルダにダウンロード先を変更

**Chromeのダウンロード設定**:

1. Chromeの設定を開く
2. 「ダウンロード」セクションを確認
3. 「ダウンロード前に各ファイルの保存場所を確認する」を無効化
4. ダウンロード先フォルダを確認

#### 5. 進捗が更新されない

**症状**: 進捗バーが動かない

**原因**:

- ページの読み込みが完了していない
- 拡張機能の通信エラー
- ブラウザのキャッシュの問題
- JavaScriptエラーの発生

**解決策**:

1. ページをリロードしてから再試行
2. 拡張機能を無効化→有効化
3. ブラウザのキャッシュをクリア
4. 開発者ツールでエラーメッセージを確認
5. 拡張機能を再インストール

### ログの確認

#### 1. 拡張機能のログ

**Chromeの開発者ツール**:

1. Chromeの開発者ツールを開く（F12）
2. **Console**タブでエラーメッセージを確認
3. **Network**タブで通信状況を確認
4. **Sources**タブでブレークポイントを設定

**拡張機能のデバッグ**:

1. `chrome://extensions/` を開く
2. NovelAI Auto Generatorの「詳細」をクリック
3. **「バックグラウンドページを検査」**をクリック
4. 開発者ツールでログを確認

#### 2. ログレベルの設定

**ログレベルの種類**:

- **エラーのみ**: エラーメッセージのみ表示
- **警告以上**: エラーと警告を表示
- **情報以上**: エラー、警告、情報を表示
- **デバッグ**: 全てのログを表示

**ログの例**:

```
[INFO] 拡張機能が初期化されました
[INFO] NovelAIページを検出しました
[WARN] プロンプト入力欄が見つかりません
[ERROR] 生成ボタンのクリックに失敗しました
[DEBUG] DOM要素の検索を開始しました
```

#### 3. ログの保存

**ログのエクスポート**:

1. 開発者ツールのConsoleタブを開く
2. 右クリックで「Save as...」を選択
3. ログファイルを保存

**ログの分析**:

- エラーメッセージの検索
- タイムスタンプの確認
- 処理フローの追跡

### パフォーマンスの問題

#### 1. 生成が遅い

**原因と対策**:

**NovelAIサーバーの負荷**:

- 時間を置いて再試行
- 生成枚数を減らす
- ピーク時間を避ける

**ネットワーク接続**:

- 接続速度を確認
- 安定した接続を使用
- プロキシ設定を確認

**ブラウザのメモリ使用量**:

- 他のタブを閉じる
- ブラウザを再起動
- メモリ使用量を監視

**対策の実装**:

```javascript
// メモリ使用量の監視
setInterval(() => {
  if (performance.memory) {
    console.log('メモリ使用量:', performance.memory.usedJSHeapSize);
  }
}, 5000);
```

#### 2. メモリ使用量が多い

**対策**:

- 生成枚数を減らす
- ブラウザを再起動
- 他の拡張機能を無効化
- 不要なタブを閉じる

**メモリリークの防止**:

- イベントリスナーの適切な削除
- タイマーのクリア
- オブジェクトの参照解除

#### 3. CPU使用率が高い

**原因**:

- 大量のDOM操作
- 頻繁なタイマー実行
- 無限ループ

**対策**:

- DOM操作の最適化
- タイマーの間隔調整
- 処理のバッチ化

### セキュリティの問題

#### 1. 権限の確認

**必要な権限**:

- NovelAI.netへのアクセス
- ダウンロード機能
- ストレージアクセス
- タブアクセス

**権限の確認方法**:

1. `chrome://extensions/` を開く
2. NovelAI Auto Generatorの「詳細」をクリック
3. 権限一覧を確認
4. 不要な権限がないか確認

#### 2. データの保護

**保存されるデータ**:

- 設定情報
- プリセットデータ
- ログ情報

**保護の方法**:

- ローカルストレージのみ使用
- 外部送信なし
- 暗号化（将来実装予定）

#### 3. プライバシーの保護

**収集される情報**:

- なし（完全にローカル動作）

**外部通信**:

- NovelAI.netのみ
- 認証情報の送信なし
- 生成データの送信なし

## FAQ

### よくある質問

#### Q1: この拡張機能は安全ですか？

**A**: はい、安全です。以下の理由から安全であることが保証されています：

- **オープンソース**: 全てのコードが公開されている
- **ローカル動作**: 外部へのデータ送信なし
- **最小権限**: 必要最小限の権限のみ要求
- **公式ドメイン**: NovelAI.netのみにアクセス

#### Q2: NovelAIのアカウント情報は保存されますか？

**A**: いいえ、保存されません。拡張機能は以下の方針で動作します：

- **認証情報の保存なし**: ログイン情報は保存しない
- **セッション情報の保存なし**: セッションデータは保存しない
- **生成データの保存なし**: 生成された画像はローカルのみ

#### Q3: 生成された画像はどこに保存されますか？

**A**: ユーザーのダウンロードフォルダに保存されます：

- **デフォルト**: 「NovelAI」フォルダ
- **カスタム**: ユーザーが指定したフォルダ
- **ファイル名**: `{日付}_{プロンプト}_{シード}_{番号}.png`

#### Q4: 複数の画像を同時に生成できますか？

**A**: 現在は1枚ずつ順次生成します。理由は以下の通りです：

- **NovelAIの制限**: 同時生成はサポートされていない
- **安定性**: 順次処理の方が安定
- **将来実装**: 並列処理の実装を検討中

#### Q5: 生成が途中で止まってしまいます

**A**: 以下の原因が考えられます：

- **ネットワーク問題**: 接続を確認
- **NovelAIの制限**: クレジットやレート制限を確認
- **ブラウザの問題**: ページをリロード
- **拡張機能の問題**: 再インストールを試行

#### Q6: カスタムプロンプトを追加できますか？

**A**: はい、可能です。以下の方法で追加できます：

- **UI経由**: ポップアップで直接入力
- **ファイルインポート**: JSONファイルで一括追加
- **設定ファイル**: 手動で設定ファイルを編集

#### Q7: 他のAI画像生成サービスでも使えますか？

**A**: 現在はNovelAI専用です。理由は以下の通りです：

- **DOM操作**: NovelAIのUIに特化
- **API仕様**: NovelAIの仕様に依存
- **将来拡張**: 他のサービスの対応を検討中

#### Q8: 生成速度を上げる方法はありますか？

**A**: 以下の方法で速度を向上できます：

- **ステップ数を調整**: 20-30が推奨
- **CFGスケールを調整**: 4-7が推奨
- **サンプラーを変更**: k_eulerが高速
- **生成枚数を減らす**: 1-5枚が推奨

#### Q9: エラーが発生した時の対処法は？

**A**: 以下の手順で対処してください：

1. **ログの確認**: 開発者ツールでエラーメッセージを確認
2. **ページのリロード**: NovelAIページを再読み込み
3. **拡張機能の再起動**: 無効化→有効化
4. **権限の確認**: 拡張機能の権限設定を確認
5. **再インストール**: 問題が解決しない場合

#### Q10: 開発に参加したい場合はどうすればよいですか？

**A**: 以下の方法で参加できます：

- **Issue報告**: バグや要望を報告
- **プルリクエスト**: コードの改善を提案
- **ドキュメント**: ドキュメントの改善
- **テスト**: テストケースの追加

**貢献の方法**:

1. リポジトリをフォーク
2. フィーチャーブランチを作成
3. 変更をコミット
4. プルリクエストを作成

### 技術的な質問

#### Q11: どのような技術を使用していますか？

**A**: 以下の技術を使用しています：

- **Chrome Extension Manifest V3**: 最新の拡張機能仕様
- **TypeScript**: 型安全なJavaScript
- **Vitest**: テストフレームワーク
- **Playwright**: E2Eテスト

#### Q12: テストカバレッジはどの程度ですか？

**A**: 現在80%以上のカバレッジを維持しています：

- **ユニットテスト**: 350以上のテストケース
- **統合テスト**: 主要機能のテスト
- **E2Eテスト**: 実際の使用フローのテスト

#### Q13: パフォーマンスはどの程度ですか？

**A**: 以下の性能を実現しています：

- **UI表示**: 2秒以内
- **ダウンロード**: 1秒以内
- **メモリ使用量**: 最小限
- **CPU使用率**: 低負荷

#### Q14: セキュリティ対策はどのように行っていますか？

**A**: 以下の対策を実施しています：

- **権限の最小化**: 必要最小限の権限のみ
- **データの暗号化**: 機密データの保護
- **外部通信の制限**: NovelAI.netのみ
- **コードの監査**: 定期的なセキュリティチェック

#### Q15: 将来の機能拡張予定はありますか？

**A**: 以下の機能拡張を予定しています：

- **並列生成**: 複数画像の同時生成
- **他のAIサービス**: 他の画像生成サービスの対応
- **高度な合成**: より複雑なプロンプト合成
- **クラウド同期**: 設定のクラウド保存

---

## セレクタープロファイル

NovelAIのUI差異に対応するため、`config/dom-selectors.json` に複数の `profiles` を定義できます。Popupの「セレクタープロファイル」で選択すると、その値が START_GENERATION に含まれ、Content Script 側で強制適用されます（未指定/auto の場合はCS側の自動検出に委ねます）。

### 使い方

- Popupの「セレクタープロファイル」ドロップダウンから `default`/`character-anime`/`character-realistic` などを選択
- プリセットに `characters[].selectorProfile` が単一で含まれる場合は自動選択
- 生成開始で `selectorProfile` が START_GENERATION 経由で適用

### 設定ファイル例（抜粋）

```json
{
  "profiles": {
    "$default": {
      "detect": ["#__next"],
      "selectors": {
        "prompt-input": ["[role=\"textbox\"][contenteditable=\"true\"]", "#__next textarea"],
        "negative-input": ["#__next textarea[placeholder*=\"negative\" i]"],
        "generate-button": ["#__next button[type=\"submit\"]", "button[aria-label*=\"生成\" i]"]
      }
    },
    "character-anime": {
      "detect": [".anime-character-ui", "[data-style=\"anime\"]"],
      "selectors": {
        "prompt-input": [
          { "scope": ".anime-character-ui", "selectors": ["textarea", "[contenteditable=true]"] }
        ],
        "negative-input": [{ "scope": ".anime-character-ui", "selectors": [".negative textarea"] }]
      }
    }
  }
}
```

プロファイルは `detect` に一致するものが自動判定されます。Popupで選んだ `selectorProfile` はこの自動判定を上書きします。

## 📞 サポート

### 問題報告

問題や質問がある場合は、[Issues](https://github.com/small-java-world/novel-ai-auto/issues)で報告してください。

### 報告時の情報

以下の情報を含めて報告してください：

1. **環境情報**
   - Chrome バージョン
   - OS
   - 拡張機能バージョン

2. **問題の詳細**
   - 発生した問題の説明
   - 再現手順
   - 期待される動作

3. **ログ情報**
   - コンソールのエラーメッセージ
   - 拡張機能のログ

### コミュニティ

- **GitHub Issues**: バグ報告と機能要望
- **GitHub Discussions**: 一般的な質問と議論
- **Wiki**: 詳細なドキュメント

### 開発者向け情報

- **API仕様**: 内部APIの詳細
- **開発ガイド**: 開発環境のセットアップ
- **コントリビューション**: 貢献方法の詳細
