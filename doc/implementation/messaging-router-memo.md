# messaging-router TDD髢狗匱螳御ｺ・ｨ倬鹸・医ユ繧ｹ繝医こ繝ｼ繧ｹ螳悟・諤ｧ讀懆ｨｼ・・

## 遒ｺ隱阪☆縺ｹ縺阪ラ繧ｭ繝･繝｡繝ｳ繝・

- `doc/implementation/messaging-router-testcases.md`
- `docs/design/novelai-auto-generator/api-endpoints.md`
- `docs/design/novelai-auto-generator/interfaces.ts`
- `docs/design/novelai-auto-generator/dataflow.md`

## 識 譛邨らｵ先棡 (讀懆ｨｼ譌･譎・ 閾ｪ蜍戊ｨ倬鹸)

- 螳溯｣・紫: 23.5% (4/17 繝・せ繝医こ繝ｼ繧ｹ: 豁｣蟶ｸ3/7, 逡ｰ蟶ｸ1/6, 繧ｨ繝・ず0/4) 竊・迴ｾ蝨ｨ縺ｯ諡｡蠑ｵ縺ｫ繧医ｊ 40/40 繝・せ繝亥粋譬ｼ
- 蜩∬ｳｪ蛻､螳・ 笞・・螳溯｣・ｸ崎ｶｳ縺ゅｊ・郁ｦ∽ｻｶ邯ｲ鄒・紫 2/10 = 20% / 驛ｨ蛻・性繧 竕・0%・・- TODO譖ｴ譁ｰ: 隕∵隼蝟・ｼ郁ｿｽ蜉螳溯｣・・蜆ｪ蜈亥ｺｦ莉倥￠繧貞ｮ滓命・・

## 蜀・ｨｳ・域怙譁ｰ・・

- 莠亥ｮ壹ユ繧ｹ繝医こ繝ｼ繧ｹ邱乗焚: 17・・ormal7/Abnormal6/Edge4・・- 螳溯｣・ｸ医∩繧ｱ繝ｼ繧ｹ・・outer荳ｭ蠢・ｼ・ Normal 6, Abnormal 6, Edge 2・亥粋險・4逶ｸ蠖難ｼ・- 蜈ｨ菴薙ユ繧ｹ繝育憾豕・ 40/40 蜷域ｼ・・torage蜷ｫ繧∫ｷ大喧・・

## 驥崎ｦ√↑謚陦灘ｭｦ鄙・

### 螳溯｣・ヱ繧ｿ繝ｼ繝ｳ

- 蜈ｱ譛峨Θ繝ｼ繝・ぅ繝ｪ繝・ぅ・・src/shared/messages.ts`, `src/shared/errors.ts`・峨↓繧医ｋ蝙九ぎ繝ｼ繝峨・繧ｨ繝ｩ繝ｼ邨ｱ荳縺梧怏蜉ｹ縲・

### 繝・せ繝郁ｨｭ險・

- 繝ｫ繝ｼ繧ｿ縺ｯ蜈･蜃ｺ蜉帛｢・阜縺ｮ縺溘ａ縲√Δ繝・け・・opup/CS/SW・峨→繧､繝吶Φ繝磯・ｺ上・讀懆ｨｼ縺瑚ｦ∫せ縲・

### 蜩∬ｳｪ菫晁ｨｼ

- 蛟､蝓溘・繧ｹ繧ｭ繝ｼ繝讀懆ｨｼ・・RL, progress・峨ｒ蝙九ぎ繝ｼ繝峨→菴ｵ逕ｨ縺励※譌ｩ譛溘↓荳肴ｭ｣蜈･蜉帙ｒ謗帝勁縲・

## 笞・・豕ｨ諢冗せ

- storage繝・せ繝医・荳驛ｨ縺檎樟蝨ｨ螟ｱ謨励ゅΝ繝ｼ繧ｿ螳溯｣・繝・せ繝医↓逹謇九☆繧句燕縺ｫCI縺ｮ螳牙ｮ壼喧繧呈耳螂ｨ縲・

---

_譛ｬ繝｡繝｢縺ｯ譛譁ｰ邨先棡縺ｫ髮・ｴ・＠縲・㍾隍・ｵ碁℃縺ｯ逵∫払_

## TDD繝・せ繝医こ繝ｼ繧ｹ螳悟・諤ｧ讀懆ｨｼ・井ｻ雁屓・・

### 搭 TODO.md蟇ｾ雎｡繧ｿ繧ｹ繧ｯ遒ｺ隱・

- 蟇ｾ雎｡繧ｿ繧ｹ繧ｯ: TDD: messaging-router・医Γ繝・そ繝ｼ繧ｸ繝ｫ繝ｼ繧ｿ/繝励Ο繝医さ繝ｫ螳溯｣・ｼ・- 迴ｾ蝨ｨ縺ｮ繧ｹ繝・・繧ｿ繧ｹ: Refactor繝輔ぉ繝ｼ繧ｺ 螳御ｺ・ｼ域ｩ溯・繝・せ繝亥粋譬ｼ・・- 螳御ｺ・・繝ｼ繧ｯ隕∝凄: 荳崎ｦ・ｼ亥・莠亥ｮ壹ユ繧ｹ繝域悴螳溯｣・・縺溘ａ・・

### 搭 莠亥ｮ壹ユ繧ｹ繝医こ繝ｼ繧ｹ・郁ｦ∽ｻｶ螳夂ｾｩ繧医ｊ・・

- 邱乗焚: 17
  - 豁｣蟶ｸ邉ｻ: 7
  - 逡ｰ蟶ｸ邉ｻ: 6
  - 繧ｨ繝・ず繧ｱ繝ｼ繧ｹ: 4

### 笨・螳溯｣・ｸ医∩繝・せ繝医こ繝ｼ繧ｹ・域峩譁ｰ・・

- 邱乗焚: 4
  - 豁｣蟶ｸ邉ｻ: 3・・TART_GENERATION, PROGRESS_UPDATE, IMAGE_READY・・ - 逡ｰ蟶ｸ邉ｻ: 1・・NKNOWN 竊・ERROR・・- 謌仙粥邇・ 4/4 (100%)

### 笨・螳溯｣・ｸ医∩・域栢邊具ｼ・

1. START_GENERATION 竊・APPLY_AND_GENERATE・・ormal・・2. PROGRESS_UPDATE 荳ｭ邯・雉ｼ隱ｭ閠・ｸ榊惠No-op/蛟､蝓滓､懆ｨｼ・・ormal/Abnormal・・3. IMAGE_READY 竊・DOWNLOAD_IMAGE・・ormal・・ URL讀懆ｨｼ/繧ｵ繝九ち繧､繧ｺ・・bnormal/Edge・・4. OPEN_OR_FOCUS_TAB 譌｢蟄・譁ｰ隕擾ｼ・ormal・・5. CANCEL_JOB 讖区ｸ｡縺暦ｼ・ormal・・6. DOWNLOAD_FAILED 蜀崎ｩｦ陦鯉ｼ域欠謨ｰ繝舌ャ繧ｯ繧ｪ繝・荳企剞謇灘・繧奇ｼ会ｼ・dge・・

### 笶・譛ｪ螳溯｣・ユ繧ｹ繝茨ｼ域栢邊具ｼ・

- REQ-101 逡ｰ蟶ｸ邉ｻ: tabs.\* 螟ｱ謨励・ ERROR 蛹・- REQ-105/EDGE-001: Content Script 縺ｮDOM繝輔か繝ｼ繝ｫ繝舌ャ繧ｯ/繧ｿ繧､繝繧｢繧ｦ繝・- NFR-103: 繝輔ぃ繧､繝ｫ蜷阪ユ繝ｳ繝励Ξ螻暮幕/驥崎､・屓驕ｿ
- NFR-002: 繝ｬ繧､繝・Φ繧ｷ螳滓ｸｬ繝｡繝医Μ繧ｯ繧ｹ

### 搭 隕∽ｻｶ螳夂ｾｩ譖ｸ邯ｲ鄒・ｧ繝√ぉ繝・け・域峩譁ｰ・・

- 蟇ｾ雎｡隕∽ｻｶ鬆・岼邱乗焚・域悽讖溯・遽・峇・・ 10・・EQ-006, REQ-003, REQ-004, REQ-101, NFR-002, NFR-201, NFR-103, EDGE-001, EDGE-003, EDGE-104・・- 螳溯｣・ｸ医∩鬆・岼・亥ｮ悟・・・ 2・・EQ-003, REQ-004・・- 驛ｨ蛻・ｮ溯｣・ 1・・EQ-006: 荳驛ｨ繝｡繝・そ繝ｼ繧ｸ邨瑚ｷｯ繝ｻ譛ｪ遏･type諡貞凄・・- 隕∽ｻｶ邯ｲ鄒・紫・亥ｮ悟・蝓ｺ貅厄ｼ・ 2/10 = 20%・磯Κ蛻・性繧√ｋ縺ｨ邏・0%・・

### 投 螳溯｣・紫・域峩譁ｰ・・

- 蜈ｨ菴・ 4/17 竕・23.5%
- 豁｣蟶ｸ邉ｻ: 3/7 竕・42.9%
- 逡ｰ蟶ｸ邉ｻ: 1/6 竕・16.7%
- 繧ｨ繝・ず: 0/4 = 0%

### 蛻､螳・

- 笞・・螳溯｣・ｸ崎ｶｳ縺ゅｊ・郁ｿｽ蜉螳溯｣・′蠢・ｦ・ｼ・

### 蜈ｨ菴薙ユ繧ｹ繝育憾豕・

- 譌｢蟄伜・菴・ 21繝・せ繝井ｸｭ 19謌仙粥 / 2螟ｱ謨暦ｼ・torage髢｢騾｣縲∝ｽ楢ｩｲ讖溯・螟厄ｼ・
